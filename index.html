<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rayray no Kilomaâ€™anï½œè±å¹´ç¥­çš„ç¨‹åº</title>
    <style>
        /* åŸºæœ¬é é¢æ¨£å¼ï¼Œè‹±æ–‡å­—é«”å„ªå…ˆä½¿ç”¨ Times New Roman */
        body { 
            font-family: "Times New Roman", "Noto Sans TC", sans-serif; 
            background-color: #f7f6ef; 
            color: #333; 
            margin: 0; 
            padding: 0; /* ç§»é™¤ body çš„ padding */
        }
        .container { max-width: 800px; margin: auto; text-align: center; padding: 1em; /* å°‡ padding ç§»åˆ° container */}
        
        /* --- âœ¨ æ–°å¢é¦–é å‹•ç•«æ¨£å¼ --- */
        #splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.8s ease-out;
        }
        #splash-video {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100%;
            height: 100%;
            object-fit: contain; /* ç¢ºä¿å½±ç‰‡å®Œæ•´é¡¯ç¤ºï¼Œä¸è£åˆ‡ */
            transform: translate(-50%, -50%);
        }
        #enter-btn {
            position: relative;
            z-index: 2001;
            padding: 15px 35px;
            font-size: 1.5em;
            color: white;
            background-color: rgba(48, 80, 48, 0.7);
            border: 2px solid white;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        #enter-btn:hover {
            background-color: rgba(48, 80, 48, 0.9);
            transform: scale(1.05);
        }
        
        /* âœ¨ è²éŸ³æ§åˆ¶æŒ‰éˆ• */
        #volume-btn {
            position: absolute;
            bottom: 20px;
            right: 20px;
            z-index: 2001;
            background: rgba(0,0,0,0.4);
            color: white;
            border: 1px solid white;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #main-content {
            display: none; /* é è¨­éš±è—ä¸»å…§å®¹ */
            opacity: 0;
            transition: opacity 1s ease-in;
        }

        /* --- âœ¨ é é¦–æ¨£å¼ --- */
        .page-header {
            display: flex;
            justify-content: space-between; /* è®“å…ƒç´ åˆ†é–‹å°é½Š */
            align-items: center;
            padding: 10px 0;
            border-bottom: 2px solid #e8e6d9;
            margin-bottom: 1.5em;
        }
        .header-left, .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .page-header .logo {
            max-height: 50px;
        }
        .page-header .instructor-name {
            font-size: 1em;
            color: #555;
            white-space: nowrap; /* é¿å…æ•™å¸«å§“åæ›è¡Œ */
        }

        #back-btn {
            font-size: 24px;
            background: none;
            border: none;
            cursor: pointer;
            color: #555;
            padding: 5px 10px;
        }
        #back-btn:hover {
            color: #000;
        }


        h1, h2 { text-align: center; color: #305030; }
        
        .title-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: -10px;
        }

        /* --- âœ¨ èª²ç¨‹å°è¦½åˆ— & æ¸¬é©—å€å¡Š --- */
        .lesson-nav, .quiz-section {
            background-color: #e8e6d9;
            padding: 1em;
            border-radius: 12px;
            margin: 1.5em 0;
        }
        .lesson-nav h3, .quiz-section h3 {
            margin-top: 0;
            color: #305030;
            border-bottom: 2px solid #c9c7b9;
            padding-bottom: 0.5em;
        }
        .lesson-links {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .lesson-links a, .quiz-btn {
            display: inline-block;
            padding: 10px 20px;
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 8px;
            color: #333;
            text-decoration: none;
            transition: all 0.3s;
        }
        .lesson-links a:hover, .quiz-btn:hover {
            background-color: #305030;
            color: #fff;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        /* âœ¨ ç·šä¸Šæ¸¬é©—å€å¡Šæ¨£å¼ (æ–¹æ¡ˆä¸€ï¼šèšç„¦å–®ä¸€æ¸¬é©—) */
        .quiz-content {
            padding: 1.5em 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        .quiz-content p {
            margin: 0;
            font-size: 1.2em;
        }
        .quiz-item img {
            max-width: 250px;
            width: 100%;
            height: auto;
            border-radius: 12px;
            border: 3px solid #fff;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .quiz-btn {
            font-size: 1.2em;
            padding: 12px 28px;
        }


        /* --- æ–°ç‰ˆæ–‡å­—èˆ‡æŒ‰éˆ•ä½ˆå±€ --- */
        .lesson-content {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 12px;
            padding: 2em;
            text-align: left;
            margin-top: 1em;
        }

        .sentence-line {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 1.5em;
        }
        
        .sentence-line:last-child {
            margin-bottom: 0;
        }

        .button-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: center;
        }

        .image-play-btn, .gemini-btn {
            background-color: rgba(0, 0, 0, 0.05);
            border: 1px solid #ccc;
            cursor: pointer;
            padding: 0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }
        
        .image-play-btn { width: 40px; height: 40px; }
        .gemini-btn { width: 32px; height: 32px; font-size: 0.9em; }

        .image-play-btn:hover, .gemini-btn:hover {
            background-color: #e9e9e9;
        }

        .play-icon::before { content: 'â–¶'; }
        .pause-icon::before { content: 'âšâš'; font-size: 0.8em; }

        .sentence-text {
            flex-grow: 1;
            font-size: 1.5em;
            line-height: 1.8;
            margin: 0;
            padding-top: 5px;
        }

        /* âœ¨ é»å­—ç¿»è­¯æ¨£å¼ */
        .word {
            cursor: pointer;
            border-bottom: 2px dotted #aaa;
            transition: background-color 0.2s;
        }
        .word:hover {
            background-color: #e8f4f8;
        }

        /* ç¿»è­¯æç¤ºæ¡† */
        #tooltip {
            position: absolute;
            background-color: #2c3e50;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 1em;
            z-index: 1010;
            display: none; /* é è¨­éš±è— */
            pointer-events: none; /* é¿å…æç¤ºæ¡†è‡ªå·±è§¸ç™¼äº‹ä»¶ */
        }
        
        /* --- åŸæœ‰ Gemini æŒ‰éˆ•èˆ‡ Modal æ¨£å¼ --- */
        .culture-btn {
            font-family: "Times New Roman", "Noto Sans TC", sans-serif;
            margin-top: 25px;
            padding: 12px 24px;
            font-size: 18px;
            background-color: #305030;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .culture-btn:hover { background-color: #486e48; }

        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.6); display: none; align-items: center;
            justify-content: center; z-index: 1000;
        }
        .modal-content {
            background: #fff; padding: 30px; border-radius: 12px;
            width: 90%; max-width: 600px; max-height: 80vh;
            overflow-y: auto; position: relative; text-align: left; line-height: 1.8;
        }
        .modal-close {
            position: absolute; top: 15px; right: 15px; font-size: 28px;
            font-weight: bold; cursor: pointer; color: #888;
        }
        .modal-close:hover { color: #333; }
        .modal-title { margin-top: 0; color: #305030;}
        .loader {
            border: 5px solid #f3f3f3; border-top: 5px solid #305030;
            border-radius: 50%; width: 40px; height: 40px;
            animation: spin 1s linear infinite; margin: auto;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* éŸ¿æ‡‰å¼èª¿æ•´ */
        @media (max-width: 600px) {
            .page-header {
                justify-content: space-between;
            }
             .header-info {
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- âœ¨ é¦–é å‹•ç•« -->
    <div id="splash-screen">
        <video id="splash-video" autoplay muted loop playsinline>
            <source src="https://res.cloudinary.com/dm1ksvptk/video/upload/v1750665618/%E5%A4%A7%E5%AF%8C%E7%BF%81%E5%8B%95%E7%95%AB_fwbjxs.mp4" type="video/mp4">
            æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´å½±ç‰‡æ’­æ”¾ã€‚
        </video>
        <button id="enter-btn">é€²å…¥èª²ç¨‹</button>
        <button id="volume-btn">ğŸ”ˆ</button>
    </div>

    <main id="main-content">
        <div class="container">
            
            <header class="page-header">
                <div class="header-left">
                     <button id="back-btn">â†©ï¸</button>
                    <img src="https://res.cloudinary.com/dm1ksvptk/image/upload/v1750667116/ChatGPT_Image_2025%E5%B9%B46%E6%9C%886%E6%97%A5_%E4%B8%8B%E5%8D%8803_49_10_g50dif.png" alt="è‡ºæ±ç¸£æœ¬åœŸèªæ•™å­¸ Logo" class="logo">
                </div>
                <div class="header-right">
                    <p class="instructor-name">æˆèª²æ•™å¸«ï¼šè˜¿æ‹‰éº»å‰ Rolla Moggi</p>
                    <img src="https://res.cloudinary.com/dm1ksvptk/image/upload/v1749659604/vxem1akzssudvs0neffn.png" alt="Logo" class="logo">
                </div>
            </header>

            <div class="title-container">
                <h1>Rayray no Kilomaâ€™an</h1>
                <button class="image-play-btn" data-audio="audio-title"><span class="play-icon"></span></button>
            </div>
            <h2>ğŸ“– è±å¹´ç¥­çš„ç¨‹åºï½œèª²æ–‡æœ—è®€ç·´ç¿’</h2>

            <!-- âœ¨ èª²ç¨‹å°è¦½åˆ— -->
            <nav class="lesson-nav">
                <h3>æ–‡åŒ–èª²ç¨‹åˆ—è¡¨</h3>
                <ul class="lesson-links">
                    <li><a href="https://www.youtube.com/watch?v=zkV900qsffY" target="_blank" rel="noopener noreferrer">ç¬¬1å ‚èª²ï¼šè±å¹´ç¥­çš„ä»‹ç´¹</a></li>
                    <li><a href="https://www.youtube.com/watch?v=cxPQUPFRUfI" target="_blank" rel="noopener noreferrer">ç¬¬2å ‚èª²ï¼šé¦¬è˜­è±å¹´ç¥­</a></li>
                    <li><a href="https://youtu.be/3O6G_ujIM2I" target="_blank" rel="noopener noreferrer">ç¬¬2å ‚èª²ï¼šéƒ½è˜­è±å¹´ç¥­</a></li>
                    <li><a href="https://www.youtube.com/watch?v=dKtyTTbKBvs" target="_blank" rel="noopener noreferrer">ç¬¬3å ‚èª²ï¼šè¤‡éŸ³å”±æ³•ä»‹ç´¹</a></li>
                    <li><a href="https://reurl.cc/VYvR5y" target="_blank" rel="noopener noreferrer">ç¬¬3å ‚èª²ï¼šé¦¬è˜­è¤‡éŸ³æ­Œè¬ </a></li>
                    <li><a href="https://www.facebook.com/watch/?v=800065338528852" target="_blank" rel="noopener noreferrer">ç¬¬4å ‚èª²ï¼šå°‘å¹´çµ„å­¸ç¿’</a></li>
                    <li><a href="https://www.youtube.com/watch?v=haXUddf3Ygs" target="_blank" rel="noopener noreferrer">ç¬¬4-1å ‚èª²ï¼šå©¦å¥³çµ„æ­Œèˆ</a></li>
                    <li><a href="https://www.youtube.com/watch?v=6milVeLkKN8" target="_blank" rel="noopener noreferrer">ç¬¬4-2å ‚èª²ï¼šå‹‡å£«è­·è¡›èˆ</a></li>
                    <li><a href="https://www.youtube.com/watch?v=GDurQY3ECTo" target="_blank" rel="noopener noreferrer">ç¬¬5å ‚èª²ï¼šå‚³çµ±æ­Œèˆ</a></li>
                    <li><a href="https://www.youtube.com/watch?v=ochU3S1gQNg" target="_blank" rel="noopener noreferrer">ç¬¬5å ‚èª²ï¼šç¾ä»£èˆ</a></li>
                    <li><a href="https://rollamoggi123.github.io/rayray-no-kiloma-an-no-singsi/" target="_blank" rel="noopener noreferrer">æ•™å¸«ç¤ºç¯„ç‰ˆå¤§å¯Œç¿</a></li>
                    <li><a href="https://rollamoggi123.github.io/rayray-no-kiloma-an-no-mitiliday/" target="_blank" rel="noopener noreferrer">æ—èªå¤§å¯Œç¿ï¼šäº’å‹•æ•™å­¸ç‰ˆ</a></li>
                </ul>
            </nav>

            <div class="lesson-content">
                <!-- å¥å­ 1 -->
                <div class="sentence-line">
                    <div class="button-group">
                        <button class="image-play-btn" data-audio="audio-1"><span class="play-icon"></span></button>
                        <button class="gemini-btn" data-text="Faloay ko romi'ad to kilomaâ€™an no Farangaw.">ğŸ“–</button>
                    </div>
                    <p class="sentence-text">
                        <span class="word" data-key="Faloay">Faloay</span> <span class="word" data-key="ko">ko</span> <span class="word" data-key="romi'ad">romi'ad</span> <span class="word" data-key="to">to</span> <span class="word" data-key="kilomaâ€™an">kilomaâ€™an</span> <span class="word" data-key="no">no</span> <span class="word" data-key="Farangaw">Farangaw</span>.
                    </p>
                </div>
                <!-- å¥å­ 2 -->
                <div class="sentence-line">
                    <div class="button-group">
                        <button class="image-play-btn" data-audio="audio-2"><span class="play-icon"></span></button>
                        <button class="gemini-btn" data-text="Sa'ayaw a romi'ad misahafay, mirekal i taliyok no niyaro', milikakawa to lalosidan.">ğŸ“–</button>
                    </div>
                    <p class="sentence-text">
                        <span class="word" data-key="Sa'ayaw_a_romi'ad">Sa'ayaw a romi'ad</span> <span class="word" data-key="misahafay">misahafay</span>, <span class="word" data-key="mirekal">mirekal</span> <span class="word" data-key="i">i</span> <span class="word" data-key="taliyok_no_niyaro'">taliyok no niyaro'</span>, <span class="word" data-key="milikakawa">milikakawa</span> <span class="word" data-key="to_lalosidan">to lalosidan</span>.
                    </p>
                </div>
                <!-- å¥å­ 3 -->
                <div class="sentence-line">
                     <div class="button-group">
                        <button class="image-play-btn" data-audio="audio-3"><span class="play-icon"></span></button>
                        <button class="gemini-btn" data-text="Sakatosa a romi'ad panemnem, tahidang to liteng misatora, pacaedong to mirormomay, mitaowak to kaetohay.">ğŸ“–</button>
                    </div>
                    <p class="sentence-text">
                        <span class="word" data-key="Sakatosa_a_romi'ad">Sakatosa a romi'ad</span> <span class="word" data-key="panemnem">panemnem</span>, <span class="word" data-key="tahidang_to_liteng">tahidang to liteng</span> <span class="word" data-key="misatora">misatora</span>, <span class="word" data-key="pacaedong_to_miromromay">pacaedong to mirormomay</span>, <span class="word" data-key="mitaowak_to_kaetohay">mitaowak to kaetohay</span>.
                    </p>
                </div>
                <!-- å¥å­ 4 -->
                <div class="sentence-line">
                     <div class="button-group">
                        <button class="image-play-btn" data-audio="audio-4"><span class="play-icon"></span></button>
                        <button class="gemini-btn" data-text="Sakatolo a romi'ad, pafata'an pacelem na malingad talariyal mikesi'.">ğŸ“–</button>
                    </div>
                    <p class="sentence-text">
                        <span class="word" data-key="Sakatolo_a_romi'ad">Sakatolo a romi'ad</span>, <span class="word" data-key="pafata'an_pacelem">pafata'an pacelem</span> <span class="word" data-key="na_malingad_talariyal_mikesi'">na malingad talariyal mikesi'</span>.
                    </p>
                </div>
                <!-- å¥å­ 5 -->
                <div class="sentence-line">
                     <div class="button-group">
                        <button class="image-play-btn" data-audio="audio-5"><span class="play-icon"></span></button>
                        <button class="gemini-btn" data-text="Sakaseepat ato sakalima a romi'ad, saromi'ad mikesi' i riyal, micelem micekiw mipacing ko kapah, ta palaylay minokay.">ğŸ“–</button>
                    </div>
                    <p class="sentence-text">
                        <span class="word" data-key="Sakaseepat_ato_sakalima_a_romi'ad">Sakaseepat ato sakalima a romi'ad</span>, <span class="word" data-key="saromi'ad_mikesi'_i_riyal">saromi'ad mikesi' i riyal</span>, <span class="word" data-key="micelem">micelem</span> <span class="word" data-key="micekiw">micekiw</span> <span class="word" data-key="mipacing_ko_kapah">mipacing ko kapah</span>, <span class="word" data-key="ta_palaylay_minokay">ta palaylay minokay</span>.
                    </p>
                </div>
                <!-- å¥å­ 6 -->
                <div class="sentence-line">
                     <div class="button-group">
                        <button class="image-play-btn" data-audio="audio-6"><span class="play-icon"></span></button>
                        <button class="gemini-btn" data-text="Sakaenem a romi'ad misahemay, malikoda ko kapah, patayra i sefi to faes ko fafahiyan, palilam to titi.">ğŸ“–</button>
                    </div>
                    <p class="sentence-text">
                        <span class="word" data-key="Sakaenem_a_romi'ad">Sakaenem a romi'ad</span> <span class="word" data-key="misahemay">misahemay</span>, <span class="word" data-key="malikoda_ko_kapah">malikoda ko kapah</span>, <span class="word" data-key="patayra_i_sefi_to_faes_ko_fafahiyan">patayra i sefi to faes ko fafahiyan</span>, <span class="word" data-key="palilam_to_titi">palilam to titi</span>.
                    </p>
                </div>
                <!-- å¥å­ 7 -->
                <div class="sentence-line">
                     <div class="button-group">
                        <button class="image-play-btn" data-audio="audio-7"><span class="play-icon"></span></button>
                        <button class="gemini-btn" data-text="Sakapito a romi'ad pipipay, mapolong ko finawlan maaides masakero ato malalefod, horirek panokay to liteng.">ğŸ“–</button>
                    </div>
                    <p class="sentence-text">
                        <span class="word" data-key="Sakapito_a_romi'ad_pipipay">Sakapito a romi'ad pipipay</span>, <span class="word" data-key="mapolong_ko_finawlan_maaides">mapolong ko finawlan maaides</span> <span class="word" data-key="masakero">masakero</span> <span class="word" data-key="ato">ato</span> <span class="word" data-key="malalefod">malalefod</span>, <span class="word" data-key="horirek_panokay_to_liteng">horirek panokay to liteng</span>.
                    </p>
                </div>
                <!-- å¥å­ 8 -->
                <div class="sentence-line">
                     <div class="button-group">
                        <button class="image-play-btn" data-audio="audio-8"><span class="play-icon"></span></button>
                        <button class="gemini-btn" data-text="Saikoray a romi'ad mipakerang ko kapot.">ğŸ“–</button>
                    </div>
                    <p class="sentence-text">
                        <span class="word" data-key="Saikoray_a_romi'ad">Saikoray a romi'ad</span> <span class="word" data-key="mipakerang_ko_kapot">mipakerang ko kapot</span>.
                    </p>
                </div>
            </div>
    
            <!-- âœ¨ ç·šä¸Šæ¸¬é©—å€å¡Š (å·²æ›´æ–°) -->
            <section class="quiz-section">
                <h3>ç¬¬ä¸€å ‚èª²ï¼šç«‹å³å…¨ç­æ¸¬é©—</h3>
                <div class="quiz-content">
                    <p>è«‹é»æ“Šä¸‹æ–¹æŒ‰éˆ•æˆ–æƒæ QR Code é€²å…¥æ¸¬é©—</p>
                    <div class="quiz-item">
                        <a href="https://wayground.com/join?gc=339281" target="_blank" rel="noopener noreferrer">
                            <img src="https://res.cloudinary.com/dm1ksvptk/image/upload/v1750670292/%E7%AC%AC%E4%B8%80%E5%A0%82%E6%B8%AC%E9%A9%97.png" alt="ç¬¬ä¸€å ‚èª²æ¸¬é©— QR Code">
                        </a>
                    </div>
                     <a href="https://wayground.com/join?gc=339281" class="quiz-btn" target="_blank" rel="noopener noreferrer">é€²å…¥ç¬¬ä¸€å ‚èª²æ¸¬é©—</a>
                </div>
            </section>

            <button id="culture-btn" class="culture-btn">âœ¨ æ¢ç´¢è±å¹´ç¥­æ–‡åŒ–</button>
        </div>
    </main>

    <!-- éš±è—çš„éŸ³è¨Šæ’­æ”¾å™¨ (å·²é‡æ–°å°æ‡‰) -->
    <audio id="audio-title" class="audio-player" src="https://res.cloudinary.com/dm1ksvptk/video/upload/v1750657545/%E8%AA%B2%E6%96%87rayray_no_kiloma_an_k7hpsw.mp3"></audio> <!-- line1 -->
    <audio id="audio-1" class="audio-player" src="https://res.cloudinary.com/dm1ksvptk/video/upload/v1750657974/line2_gti8hy.mp3"></audio> <!-- line2 -->
    <audio id="audio-2" class="audio-player" src="https://res.cloudinary.com/dm1ksvptk/video/upload/v1750658020/line3_blpsw6.mp3"></audio> <!-- line3 -->
    <audio id="audio-3" class="audio-player" src="https://res.cloudinary.com/dm1ksvptk/video/upload/v1750658115/line4_ngh0nr.mp3"></audio> <!-- line4 -->
    <audio id="audio-4" class="audio-player" src="https://res.cloudinary.com/dm1ksvptk/video/upload/v1750658179/line5_omltw4.mp3"></audio> <!-- line5 -->
    <audio id="audio-5" class="audio-player" src="https://res.cloudinary.com/dm1ksvptk/video/upload/v1750658270/line6_pf2hef.mp3"></audio> <!-- line6 -->
    <audio id="audio-6" class="audio-player" src="https://res.cloudinary.com/dm1ksvptk/video/upload/v1750658330/line7_fg4jqm.mp3"></audio> <!-- line7 -->
    <audio id="audio-7" class="audio-player" src="https://res.cloudinary.com/dm1ksvptk/video/upload/v1750658390/line8_qkssrh.mp3"></audio> <!-- line8 -->
    <audio id="audio-8" class="audio-player" src="https://res.cloudinary.com/dm1ksvptk/video/upload/v1750658429/line9_txq625.mp3"></audio> <!-- line9 -->

    <!-- ç¿»è­¯æç¤ºæ¡† -->
    <div id="tooltip"></div>

    <!-- Modal å½ˆå‡ºè¦–çª— -->
    <div id="gemini-modal" class="modal-overlay">
        <div class="modal-content">
            <span id="modal-close-btn" class="modal-close">&times;</span>
            <h3 id="modal-title" class="modal-title">AI å°è€å¸«</h3>
            <div id="modal-body"><div class="loader"></div></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- âœ¨ é¦–é å‹•ç•«é‚è¼¯ (å·²æ›´æ–°ï¼Œæ›´ç©©å®š) ---
            const splashScreen = document.getElementById('splash-screen');
            const enterBtn = document.getElementById('enter-btn');
            const mainContent = document.getElementById('main-content');
            const volumeBtn = document.getElementById('volume-btn');
            const splashVideo = document.getElementById('splash-video');
            const backBtn = document.getElementById('back-btn');

            const showMainContent = () => {
                splashScreen.style.opacity = '0';
                splashScreen.addEventListener('transitionend', () => {
                    splashScreen.style.display = 'none';
                    mainContent.style.display = 'block';
                    void mainContent.offsetWidth; 
                    mainContent.style.opacity = '1';
                }, { once: true });
            };

            const showSplashScreen = () => {
                mainContent.style.opacity = '0';
                mainContent.addEventListener('transitionend', () => {
                    mainContent.style.display = 'none';
                    splashScreen.style.display = 'flex';
                    void splashScreen.offsetWidth;
                    splashScreen.style.opacity = '1';
                }, { once: true });
            };

            enterBtn.addEventListener('click', showMainContent);
            backBtn.addEventListener('click', showSplashScreen);

            volumeBtn.addEventListener('click', () => {
                splashVideo.muted = !splashVideo.muted;
                volumeBtn.textContent = splashVideo.muted ? 'ğŸ”ˆ' : 'ğŸ”Š';
            });


            // --- âœ¨ æ™ºæ…§è©å…¸ (å·²æ›´æ–°) ---
            const vocabulary = {
                "Faloay": "å…« (æ•¸å­—)", "ko": "ï¼ˆä¸»æ ¼æ¨™è¨˜ï¼‰", "romi'ad": "å¤©ã€æ—¥å­",
                "to": "ï¼ˆæ–œæ ¼ï¼‰", "kilomaâ€™an": "è±å¹´ç¥­", "no": "ï¼ˆå±¬æ ¼ï¼‰",
                "Farangaw": "é¦¬è˜­ç¤¾", "Sa'ayaw_a_romi'ad": "ç¬¬ä¸€å¤©", "misahafay": "æº–å‚™æ—¥",
                "mirekal": "å ±è¨Š", "i": "åœ¨...", "taliyok_no_niyaro'": "éƒ¨è½å‘¨åœ",
                "milikakawa": "æº–å‚™å™¨å…·", "to_lalosidan": "å‚³çµ±å™¨å…·",
                "Sakatosa_a_romi'ad": "ç¬¬äºŒå¤©", "panemnem": "çµ¦æ³‰æ°´", "tahidang_to_liteng": "è¿è«‹ç¥–éˆ",
                "misatora": "ç¥ˆéˆ", "pacaedong_to_miromromay": "é’å¹´é ˜å°æ¥å—äº¤ä»»å‹™",
                "mitaowak_to_kaetohay": "é£²ç›¡è’¸é¤¾é…’", "Sakatolo_a_romi'ad": "ç¬¬ä¸‰å¤©",
                "pafata'an_pacelem": "ä¸€æ—©æ¸…é»äººæ•¸", "na_malingad_talariyal_mikesi'": "æ‰å‡ºç™¼åˆ°æµ·é‚Šèˆ‰è¡Œæµ·ç¥­",
                "Sakaseepat_ato_sakalima_a_romi'ad": "ç¬¬å››ã€äº”å¤©", "saromi'ad_mikesi'_i_riyal": "é’å¹´æ•´å¤©åœ¨æµ·é‚Š",
                "micelem": "æ½›æ°´", "micekiw": "æ¡é›†èºè²é¡", "mipacing_ko_kapah": "é’å¹´å°„é­š",
                "ta_palaylay_minokay": "æ‰å¾æµ·é‚Šè·³å‹‡å£«èˆå›åˆ°èšæœƒæ‰€", "Sakaenem_a_romi'ad": "ç¬¬å…­å¤©",
                "misahemay": "æ—æµé€ é£¯(è£½ä½œç³¯ç±³é£¯)", "malikoda_ko_kapah": "é’å¹´å¤§æœƒèˆ",
                "patayra_i_sefi_to_faes_ko_fafahiyan": "å¥³æ€§ä½¿å¸¶ç±³å»åœ¨èšæœƒæ‰€",
                "palilam_to_titi": "åˆ†è‚‰", "Sakapito_a_romi'ad_pipipay": "ç¬¬ä¸ƒå¤©(æ¯”è³½æ—¥)",
                "mapolong_ko_finawlan_maaides": "å…¨é«”æ—äººç›¸äº’è¼ƒå‹", "masakero": "è·³èˆ", "ato": "å’Œ",
                "malalefod": "äº’ç›¸è³½è·‘", "horirek_panokay_to_liteng": "å®Œæˆå¾Œé€ç¥–éˆå›å®¶",
                "Saikoray_a_romi'ad": "æœ€å¾Œä¸€å¤©", "mipakerang_ko_kapot": "å¹´é½¡éšå±¤é€²è¡Œå®Œå·¥ç¥­"
            };

            const allPlayButtons = document.querySelectorAll('.image-play-btn');
            const allPlayers = document.querySelectorAll('.audio-player');
            const geminiExplainButtons = document.querySelectorAll('.gemini-btn');
            const cultureBtn = document.getElementById('culture-btn');
            const modal = document.getElementById('gemini-modal');
            const modalCloseBtn = document.getElementById('modal-close-btn');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');
            const tooltip = document.getElementById('tooltip');

            // --- âœ¨ é»å­—ç¿»è­¯é‚è¼¯ ---
            const clickableWords = document.querySelectorAll('.word');
            clickableWords.forEach(word => {
                word.addEventListener('click', (e) => {
                    e.stopPropagation(); 
                    const key = e.target.dataset.key;
                    const translation = vocabulary[key];
                    if (translation) {
                        tooltip.textContent = translation;
                        const rect = e.target.getBoundingClientRect();
                        tooltip.style.left = `${rect.left + window.scrollX}px`;
                        tooltip.style.top = `${rect.top + window.scrollY - tooltip.offsetHeight - 5}px`;
                        tooltip.style.display = 'block';
                    }
                });
            });

            document.body.addEventListener('click', () => {
                tooltip.style.display = 'none';
            });

            // --- éŸ³è¨Šæ’­æ”¾é‚è¼¯ (å·²ä¿®æ­£) ---
            allPlayButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const targetAudioId = button.dataset.audio;
                    const targetPlayer = document.getElementById(targetAudioId);
                    if (!targetPlayer) return;

                    const isCurrentlyPlaying = !targetPlayer.paused;

                    if (!isCurrentlyPlaying) {
                        allPlayers.forEach(p => {
                            if (p !== targetPlayer) {
                                p.pause();
                                p.currentTime = 0;
                            }
                        });
                    }

                    if (isCurrentlyPlaying) {
                        targetPlayer.pause();
                    } else {
                        targetPlayer.play().catch(err => {
                            if (err.name !== 'AbortError') {
                                console.error("æ’­æ”¾éŒ¯èª¤:", err);
                            }
                        });
                    }
                });
            });

            allPlayers.forEach(player => {
                player.addEventListener('play', () => {
                    const btn = document.querySelector(`[data-audio="${player.id}"]`);
                    if (btn && btn.querySelector('span')) {
                        btn.querySelector('span').className = 'pause-icon';
                    }
                });

                player.addEventListener('pause', () => { // This covers both pause and ended
                    const btn = document.querySelector(`[data-audio="${player.id}"]`);
                    if (btn && btn.querySelector('span')) {
                        btn.querySelector('span').className = 'play-icon';
                    }
                });
            });
            
            // --- Gemini API å‘¼å«é‚è¼¯ ---
            const callGemini = async (prompt) => {
                modalBody.innerHTML = '<div class="loader"></div>';
                modal.style.display = 'flex';

                const apiKey = ""; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                
                const payload = { contents: [{ role: "user", parts: [{ text: prompt }] }] };

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    if (!response.ok) throw new Error(`API è«‹æ±‚å¤±æ•—ï¼Œç‹€æ…‹ç¢¼: ${response.status}`);
                    const result = await response.json();
                    if (result.candidates && result.candidates[0].content.parts[0].text) {
                        modalBody.innerHTML = result.candidates[0].content.parts[0].text.replace(/\n/g, '<br>');
                    } else {
                        throw new Error('å¾ API æ”¶åˆ°çš„å›æ‡‰æ ¼å¼ä¸æ­£ç¢ºã€‚');
                    }
                } catch (error) {
                    console.error('Gemini API å‘¼å«å¤±æ•—:', error);
                    modalBody.innerHTML = `ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚<br>(${error.message})`;
                }
            };

            geminiExplainButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const sentence = button.dataset.text;
                    modalTitle.innerText = 'ğŸ“– é€å¥è©³è§£';
                    // å„ªåŒ–å¾Œçš„ promptï¼Œæ•´åˆäº†æ‚¨æä¾›çš„æ­£ç¢ºè³‡è¨Š
                    const prompt = `è«‹æ ¹æ“šä»¥ä¸‹æä¾›çš„ã€Œæ­£ç¢ºå–®å­—å®šç¾©ã€ï¼Œå°‡é€™å¥é˜¿ç¾èªç¿»è­¯æˆç¹é«”ä¸­æ–‡ï¼Œä¸¦ç”¨æ¢åˆ—å¼è©³ç´°è§£é‡‹å…¶ä¸­çš„æ–‡æ³•çµæ§‹èˆ‡å–®å­—ã€‚è«‹ä»¥åˆå­¸è€…å®¹æ˜“ç†è§£çš„æ–¹å¼èªªæ˜ã€‚

**æ­£ç¢ºå–®å­—å®šç¾©:**
* Faloayï¼šæ•¸å­— "8"
* a romi'adï¼šå¤© (a æ˜¯é€£ç¹«è©)
* koï¼šæ˜¯ä¸»æ ¼æ¨™è¨˜
* noï¼šå±¬æ ¼
* toï¼šæ–œæ ¼
* mirekalï¼šå ±è¨Š
* taliyok no niyaro'ï¼šéƒ¨è½å‘¨åœ
* milikakawaï¼šæº–å‚™å™¨å…·
* lalosidanï¼šå‚³çµ±å™¨å…·
* misahafayï¼šæº–å‚™æ—¥
* panemnem: çµ¦æ³‰æ°´
* tahidang to liteng: è¿è«‹ç¥–éˆ
* misatora: ç¥ˆéˆ
* pacaedong to miromromay: é’å¹´é ˜å°æ¥å—äº¤ä»»å‹™
* mitaowak to kaetohay: é£²ç›¡è’¸é¤¾é…’
* pafata'an pacelem: ä¸€æ—©æ¸…é»äººæ•¸
* na malingad talariyal mikesi': æ‰å‡ºç™¼åˆ°æµ·é‚Šèˆ‰è¡Œæµ·ç¥­
* saromi'ad mikesi' i riyal: é’å¹´æ•´å¤©åœ¨æµ·é‚Š
* micelem: æ½›æ°´
* micekiw: æ¡é›†èºè²é¡
* mipacing ko kapah: é’å¹´å°„é­š
* ta palaylay minokay: æ‰å¾æµ·é‚Šè·³å‹‡å£«èˆå›åˆ°èšæœƒæ‰€
* misahemay: æ—æµé€ é£¯(è£½ä½œç³¯ç±³é£¯)
* malikoda ko kapah: é’å¹´å¤§æœƒèˆ
* patayra i sefi to faes ko fafahiyan: å¥³æ€§ä½¿å¸¶ç±³å»åœ¨èšæœƒæ‰€
* palilam to titi: åˆ†è‚‰
* Sakapito a romi'ad pipipay: ç¬¬ä¸ƒå¤©(æ¯”è³½æ—¥)
* mapolong ko finawlan maaides: å…¨é«”æ—äººç›¸äº’è¼ƒå‹
* masakero: è·³èˆ
* malalefod: äº’ç›¸è³½è·‘
* horirek panokay to liteng: å®Œæˆå¾Œé€ç¥–éˆå›å®¶
* Saikoray a romi'ad: æœ€å¾Œä¸€å¤©
* mipakerang ko kapot: å¹´é½¡éšå±¤é€²è¡Œå®Œå·¥ç¥­

**åˆ†æç›®æ¨™å¥ï¼š**
ã€Œ${sentence}ã€

**ä½ çš„å›æ‡‰æ ¼å¼æ‡‰è©²å¦‚ä¸‹ï¼š**
**ä¸­æ–‡ç¿»è­¯ï¼š** [æ­¤è™•å¡«å¯«ç¿»è­¯]

**å–®å­—åˆ†æï¼š**
* [å–®å­—1]ï¼š[è§£é‡‹1]
* [å–®å­—2]ï¼š[è§£é‡‹2]

**æ–‡æ³•çµæ§‹ï¼š**
* [æ–‡æ³•é»1]ï¼š[è§£é‡‹1]
* [æ–‡æ³•é»2]ï¼š[è§£é‡‹2]`;
                    callGemini(prompt);
                });
            });

            cultureBtn.addEventListener('click', () => {
                modalTitle.innerText = 'âœ¨ æ¢ç´¢è±å¹´ç¥­æ–‡åŒ–';
                const fullText = Array.from(document.querySelectorAll('.gemini-btn')).map(btn => btn.dataset.text).join('\n');
                const prompt = `æˆ‘æ­£åœ¨å­¸ç¿’é—œæ–¼å°ç£é˜¿ç¾æ—è±å¹´ç¥­ (Kiloma'an) çš„ä¸€ç¯‡é˜¿ç¾èªèª²æ–‡ã€‚è«‹ä»¥ä¸€å€‹å°æ–‡åŒ–æ„Ÿèˆˆè¶£çš„èªè¨€å­¸ç¿’è€…çš„è§’åº¦ï¼Œç”¨ç¹é«”ä¸­æ–‡è©³ç´°ä»‹ç´¹è±å¹´ç¥­çš„æ–‡åŒ–èƒŒæ™¯èˆ‡é‡è¦æ€§ï¼Œä¸¦èªªæ˜åœ¨é€™ç¯‡èª²æ–‡ä¸­æåˆ°çš„ç¨‹åºï¼ˆä¾‹å¦‚ï¼šmisahafay, panemnem, mikesi' ç­‰ï¼‰åˆ†åˆ¥ä»£è¡¨ä»€éº¼æ–‡åŒ–æ„ç¾©ã€‚\n\nèª²æ–‡å…§å®¹åƒè€ƒå¦‚ä¸‹ï¼š\n${fullText}`;
                callGemini(prompt);
            });

            const closeModal = () => {
                modal.style.display = 'none';
                modalBody.innerHTML = '';
            };
            modalCloseBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) { closeModal(); }
            });
        });
    </script>
</body>
</html>
